
# 智能购物助手

## 主要功能

1. **商品与类别映射**：
   - 代码定义了一个字典 `product_to_category`，将商品名称与其类别进行映射。

2. **加载购物数据**：
   - 从 `shopping_data.json` 文件中加载购物数据，并计算各商品类别的购买统计信息，包括总购买次数、最近购买次数以及相关时间差。

3. **计算杀熟风险**：
   - 根据购买统计信息计算每个类别的“杀熟风险”，即是否有价格变动的风险。

4. **WebSocket 通信**：
   - 定义了一个 `Ws_Param` 类来管理 WebSocket 的参数和 URL 生成。
   - 定义了 WebSocket 回调函数，如 `on_message`、`on_open` 等，用于处理消息和连接。

5. **查询生成**：
   - 使用 `generate_query` 函数根据用户输入生成查询模板，询问关于特定商品的常见问题及解决方案。

6. **Flask 路由**：
   - 使用 Flask 框架定义了一个路由 `/get_product_info`，接收 POST 请求，返回商品类别信息和模型的响应。
   - 另一个路由 `/` 用于返回主页的 HTML 模板。

## 使用流程

1. 用户通过前端发送请求，提供商品名称。
2. 服务器处理请求，查找商品的类别及购买统计信息。
3. 根据商品名称和问题生成查询，并通过 WebSocket 发送到 GPT 模型。
4. 接收到模型的响应后，更新并返回给用户。

## JSON 文件内容

`shopping_data.json` 文件中包含了多个商品的购买信息，如商品名称、类别、购买日期和价格等。这个数据用于计算不同商品类别的购买统计信息和杀熟风险。

## 总结

整体来说，这段代码构建了一个智能购物助手，结合了后端数据处理和 WebSocket 通信，可以为用户提供实时的购物建议和解决方案。
